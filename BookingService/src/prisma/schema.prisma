
generator client {
  provider = "prisma-client-js"
  // output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}


model Booking{
  id               Int @id @default(autoincrement())
  userId           Int 
  hotelId          Int
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  bookingAmount    Int
  totalGuests      Int
  status           BookingStatus @default(PENDING)
  idempotencyKey   IdempotencyKey?
}

enum BookingStatus{
  PENDING
  CONFIRMED
  CANCELLED
}
model IdempotencyKey{
  id            Int @id @default(autoincrement())
  key           String @unique //uuid
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  bookingId     Int @unique
  booking       Booking @relation(fields: [bookingId] , references: [id])
  finalized     Boolean @default(false)
}

